import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as s,b as l,o as i,r as n}from"./app-BUegsOj5.js";const c={},o=l(`<h2 id="单林单域架构" tabindex="-1"><a class="header-anchor" href="#单林单域架构"><span>单林单域架构</span></a></h2><p>对于绝大部分中小企业来说，单林单域（Single Forest Single Domain）架构为首选，因为：</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> 满足业务需求</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> 满足安全需求</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> 架构简单</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> 维护便捷</label></li></ul><div class="hint-container info"><p class="hint-container-title">一台域控服务器可以创建多少用户？</p><p>可以创建约21.5亿个对象，对象（Object）指：用户，计算机，OU等。</p></div><h2 id="林根域名选择" tabindex="-1"><a class="header-anchor" href="#林根域名选择"><span>林根域名选择</span></a></h2><p>在单林单域环境下，只有一个域名，就是林根域名。可能会有下面形式：</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> minicontoso.com</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" disabled="disabled"><label class="task-list-item-label" for="task-item-5"> ad.minicontoso.com</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" disabled="disabled"><label class="task-list-item-label" for="task-item-6"> corp.minicontoso.com</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" disabled="disabled"><label class="task-list-item-label" for="task-item-7"> ...</label></li></ul><p>不同场景和需求，可以采用对应形式。</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-8"> minicontoso.com 是一种简洁的维护模式。</label></li></ul><h2 id="域控服务器" tabindex="-1"><a class="header-anchor" href="#域控服务器"><span>域控服务器</span></a></h2><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-9"> 活动目录域服务专用</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-10"> 采用虚拟服务器架构</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-11"> 推荐两台或者以上，以提供冗余和负载均衡</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-12" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-12"> 具备可靠的备份策略</label></li></ul><h2 id="操作主机" tabindex="-1"><a class="header-anchor" href="#操作主机"><span>操作主机</span></a></h2><h3 id="schema-master" tabindex="-1"><a class="header-anchor" href="#schema-master"><span>Schema master</span></a></h3><p><code>Forest level</code></p><p>To make change Schema in forest (such as implement Exchange, Lync, SCCM)</p><h3 id="domain-naming-master" tabindex="-1"><a class="header-anchor" href="#domain-naming-master"><span>Domain naming master</span></a></h3><p><code>Forest level</code></p><p>To add/remove domain in forest</p><h3 id="pdc-primary-domain-controller" tabindex="-1"><a class="header-anchor" href="#pdc-primary-domain-controller"><span>PDC（Primary Domain Controller）</span></a></h3><p><code>Domain level</code></p><p>Time root in domain</p><p>Group policy central management</p><p>Handle password change specially (the change will sync to PDC immediately)</p><p>Handle user account lock specially</p><h3 id="rid-pool-master" tabindex="-1"><a class="header-anchor" href="#rid-pool-master"><span>RID pool master</span></a></h3><p><code>Domain level</code></p><p>Assign RIDs to DCs (500/time)</p><h3 id="infrastucture-master" tabindex="-1"><a class="header-anchor" href="#infrastucture-master"><span>Infrastucture master</span></a></h3><p><code>Domain level</code></p><p>Objects reference in different domains</p><p><strong>获取操作主机</strong></p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>netdom query fsmo
Schema master               BJDC01<span class="token punctuation">.</span>minicontoso<span class="token punctuation">.</span>com
Domain naming master        BJDC01<span class="token punctuation">.</span>minicontoso<span class="token punctuation">.</span>com
PDC                         BJDC01<span class="token punctuation">.</span>minicontoso<span class="token punctuation">.</span>com
RID pool manager            BJDC01<span class="token punctuation">.</span>minicontoso<span class="token punctuation">.</span>com
Infrastructure master       BJDC01<span class="token punctuation">.</span>minicontoso<span class="token punctuation">.</span>com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="时间" tabindex="-1"><a class="header-anchor" href="#时间"><span>时间</span></a></h2><p>时间的准确性对任何系统都至关重要。</p><p>默认情况下，第一台安装的域控服务器是PDC（Primary Domain Controller），PDC是域环境内时间的源。假如域环境中有四台域控服务器BJDC01，BJDC02，BJDC03，BJDC04，那么：</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-13" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-13"> 域计算机向登录的域控服务器（BJDC01/BJDC02/BJDC03/BJDC04）同步时间</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-14" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-14"> 域控服务器（BJDC02/BJDC03/BJDC04）向PDC（BJDC01）同步时间</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-15" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-15"> PDC（BJDC01）默认情况下，是第一台域控服务器</label></li></ul><p>查询当前登录的域控服务器</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token variable">$env</span>:LOGONSERVER
\\\\BJDC02
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装第一台域控服务器后，我们可以在域控服务器上通过下面命令同步时间，以确保PDC时间的准确。</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>w32tm <span class="token operator">/</span>config <span class="token operator">/</span>computer:BJDC01<span class="token punctuation">.</span>minicontoso<span class="token punctuation">.</span>com <span class="token operator">/</span>manualpeerlist:time<span class="token punctuation">.</span>windows<span class="token punctuation">.</span>com <span class="token operator">/</span>syncfromflags:manual <span class="token operator">/</span>update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="网络和主机" tabindex="-1"><a class="header-anchor" href="#网络和主机"><span>网络和主机</span></a></h2><p>网络</p><table><thead><tr><th>城市</th><th>网络</th></tr></thead><tbody><tr><td>北京</td><td>10.10.0.0 / 16</td></tr><tr><td>上海</td><td>10.20.0.0 / 16</td></tr><tr><td>深圳</td><td>10.30.0.0 / 16</td></tr></tbody></table><p>主机</p><table><thead><tr><th>域控服务器</th><th>IP地址</th><th>网络</th></tr></thead><tbody><tr><td>BJDC01</td><td>10.10.10.10</td><td>10.10.10.0 / 24</td></tr><tr><td>BJDC02</td><td>10.10.10.11</td><td>10.10.10.0 / 24</td></tr><tr><td>SHDC01</td><td>10.20.10.10</td><td>10.20.10.0 / 24</td></tr><tr><td>SHDC02</td><td>10.20.10.11</td><td>10.20.10.0 / 24</td></tr><tr><td>SZDC01</td><td>10.30.10.10</td><td>10.30.10.0 / 24</td></tr><tr><td>SZDC02</td><td>10.30.10.11</td><td>10.30.10.0 / 24</td></tr></tbody></table><div class="hint-container important"><p class="hint-container-title">站点 Site</p><p>企业内网，各个城市之间的网络质量足够好，足够稳定的情况下，也可以考虑不实施（多）站点架构，也就是不再部署域控服务器SHDC01 / SHDC02 / SZDC01 / SZDC02，以节省服务器资源。</p></div>`,46);function d(r,p){const e=n("Badge");return i(),a("div",null,[s(e,{text:"Focusing on Small and Medium-sized Enterprise",type:"tip",vertical:"middle"}),o])}const k=t(c,[["render",d],["__file","index.html.vue"]]),b=JSON.parse('{"path":"/","title":"首页","lang":"zh-CN","frontmatter":{"title":"首页","icon":"fa-brands fa-windows","star":true,"order":1,"category":["活动目录"],"tag":["活动目录","活动目录设计"],"head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/"}],["meta",{"property":"og:site_name","content":"minicontoso"}],["meta",{"property":"og:title","content":"首页"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"Echo"}],["meta",{"property":"article:tag","content":"活动目录"}],["meta",{"property":"article:tag","content":"活动目录设计"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"首页\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Echo\\",\\"url\\":\\"https://www.minicontoso.com\\"}]}"]]},"headers":[{"level":2,"title":"单林单域架构","slug":"单林单域架构","link":"#单林单域架构","children":[]},{"level":2,"title":"林根域名选择","slug":"林根域名选择","link":"#林根域名选择","children":[]},{"level":2,"title":"域控服务器","slug":"域控服务器","link":"#域控服务器","children":[]},{"level":2,"title":"操作主机","slug":"操作主机","link":"#操作主机","children":[{"level":3,"title":"Schema master","slug":"schema-master","link":"#schema-master","children":[]},{"level":3,"title":"Domain naming master","slug":"domain-naming-master","link":"#domain-naming-master","children":[]},{"level":3,"title":"PDC（Primary Domain Controller）","slug":"pdc-primary-domain-controller","link":"#pdc-primary-domain-controller","children":[]},{"level":3,"title":"RID pool master","slug":"rid-pool-master","link":"#rid-pool-master","children":[]},{"level":3,"title":"Infrastucture master","slug":"infrastucture-master","link":"#infrastucture-master","children":[]}]},{"level":2,"title":"时间","slug":"时间","link":"#时间","children":[]},{"level":2,"title":"网络和主机","slug":"网络和主机","link":"#网络和主机","children":[]}],"git":{},"readingTime":{"minutes":2.28,"words":684},"filePathRelative":"README.md"}');export{k as comp,b as data};
